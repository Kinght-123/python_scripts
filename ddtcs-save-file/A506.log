[2025-02-24 00:51:38,894][INFO] 收到了tos发来的指令, 箱号为TEMU7986615
<message formId="FORM_TRUCK_EMPTY_TO_ORIGIN" ack="N" MSID="-4465601"><che CHID="A506" equipType="TRUCK" MTEU="2" DSTA="ICTY" OPMD="TRUCK" CHASSIS="BOMBCART" status="Working" locale="en_US" location="Q10" userID="490001"><pool name="POOL_Q10"><list count="1" type="pow"><pow name="Q10" mode="TrucksOnly" /></list></pool><work count="1" moveStage="PLANNED" planningIntent="SINGLE"><job MVKD="LOAD" pow="Q10" age="666" priority="N" shift="13" moveStage="PLANNED"><container EQID="TEMU7986615" LNTH="40" QWGT="25952" MNRS="" QCAT="E" EQTP="45G1" HGHT="2896" LOPR="STM" TRKC="" ACRR="TRUCK" DCRR="RUIYTJ1_01E" RLSE="" RFRT="" CCON="" ISHZ="N" DWTS="4" ISGP="GP" GRAD="" RMRK="" JPOS="CTR" PUTJPOS="CTR" /><position PPOS="01D6406.1" refID="Y.TECT:01D.64.06.1" AREA="01D64" AREA_TYPE="YardRow" type="from" DOOR="A" /><position PPOS="Q10-0" refID="V.RUIYTJ1_01E:A.38.08.84" AREA="Q10" AREA_TYPE="Vessel" type="to" DOOR="Y" VBAY="38A" /></job></work><displayMsg msgID="0">No Error</displayMsg></che></message>
[2025-02-24 00:51:38,897][INFO] tosc-master收到了任务, 箱号为TEMU7986615
A506 recv task. CacheTaskCtx(task_id=8fb3597588f34e5788061b07be70d2a0, containers=[{'id': 'TEMU7986615', 'size': 40, 'weight': 25952, 'position': 2, 'slot': 'A.38.08.84'}], act_order_type=3, act_business_type=1, dest_type=1, pow=Q110, seq=3884, vbay=38, vessel_id=RUIYTJ1_01E, need_ps=True, destination=O1D.64)
[2025-02-24 00:52:58,996][INFO] tosc-master向taskmgr发送任务, 箱号为TEMU7986615
A506 send task, CacheTaskCtx(task_id=8fb3597588f34e5788061b07be70d2a0, containers=[{'id': 'TEMU7986615', 'size': 40, 'weight': 25952, 'position': 2, 'slot': 'A.38.08.84'}], act_order_type=3, act_business_type=1, dest_type=1, pow=Q110, seq=11, vbay=38, vessel_id=RUIYTJ1_01E, need_ps=True, destination=O1D.64)
taskmgr给车端发送堆场的任务, 箱号为TEMU7986615
[2025-02-24 00:52:59,327][INFO]: [task] <A506: 8fb3597588f34e5788061b07be70d2a0,O1D,64,MID,RECEIVE,待更新> from 待更新 to 更新中
[2025-02-24 00:52:59,327][INFO]: assign_task to <Che: A506 - 10.188.90.6:50002> with data = {'header': {'trace_id': 'ff4d0bcc17d64be787339c39f069c225', 'trans_id': 'b8d9135c-3804-4013-821c-0df1ae11f60e', 'che_id': 'A506', 'timestamp': '2025-02-24T00:52:58.994094Z', 'version': 'v2'}, 'trace_id': 'ff4d0bcc17d64be787339c39f069c225', 'task_id': '8fb3597588f34e5788061b07be70d2a0', 'status': 'UPDATED', 'containers': [{'id': 'TEMU7986615', 'size': 40, 'weight': 25952, 'position': 'CON_POS_MID', 'slot': 'A.38.08.84'}], 'act_order_type': 'RECEIVE', 'act_business_type': 'LOAD', 'dest_type': 'YCTP', 'actual_destination': 'O1D-64', 'dest_point': {'x': 566856.232177673, 'y': 4317817.077414023}, 'task_type': 'EMPTY_TO_YC', 'task_mode': 'AUTO', 'target': 'O1D', 'sub_target': '64', 'guide_cps': True, 'crane_id': 'O1D', 'tos_id': '-4465601', 'pow': 'Q110', 'vbay': 38, 'seq': 11, 'vessel_id': 'RUIYTJ1_01E', 'need_ps': True}
[2025-02-24 00:52:59,358][INFO]: Send 任务下发 to <Che: A506 - 10.188.90.6:50002> received status：202




[2025-02-24 00:58:58,953][INFO] 这个时候tos又发了一条A506的指令, 但是箱号已经改变了, 变为了XHCU5052126
<message formId="FORM_TRUCK_EMPTY_TO_ORIGIN" ack="N" MSID="-4466856"><che CHID="A506" equipType="TRUCK" MTEU="2" DSTA="ICTY" OPMD="TRUCK" CHASSIS="BOMBCART" status="Working" locale="en_US" location="Q10" userID="490001"><pool name="POOL_Q10"><list count="1" type="pow"><pow name="Q10" mode="TrucksOnly" /></list></pool><work count="1" moveStage="PLANNED" planningIntent="SINGLE"><job MVKD="LOAD" pow="Q10" age="673" priority="N" shift="12" moveStage="PLANNED"><container EQID="XHCU5052126" LNTH="40" QWGT="28280" MNRS="" QCAT="E" EQTP="45G1" HGHT="2896" LOPR="STM" TRKC="" ACRR="TRUCK" DCRR="RUIYTJ1_01E" RLSE="" RFRT="" CCON="" ISHZ="N" DWTS="3" ISGP="GP" GRAD="" RMRK="" JPOS="CTR" PUTJPOS="CTR" /><position PPOS="01D6406.2" refID="Y.TECT:01D.64.06.2" AREA="01D64" AREA_TYPE="YardRow" type="from" DOOR="Y" /><position PPOS="Q10-0" refID="V.RUIYTJ1_01E:A.38.08.82" AREA="Q10" AREA_TYPE="Vessel" type="to" DOOR="Y" VBAY="38A" /></job></work><displayMsg msgID="0">No Error</displayMsg></che></message>
[2025-02-24 01:09:03,547][INFO] tosc收到了tos发来的指令, 箱号是XHCU5052126
<message formId="FORM_TRUCK_EMPTY_TO_ORIGIN" ack="Y" MSID="86"><che CHID="A506" equipType="TRUCK" MTEU="2" DSTA="ICTY" OPMD="TRUCK" CHASSIS="BOMBCART" status="Working" locale="en_US" location="Q10" userID="490001"><pool name="POOL_Q10"><list count="1" type="pow"><pow name="Q10" mode="TrucksOnly" /></list></pool><work count="1" moveStage="PLANNED" planningIntent="SINGLE"><job MVKD="LOAD" pow="Q10" age="683" priority="N" shift="11" moveStage="PLANNED"><container EQID="XHCU5052126" LNTH="40" QWGT="28280" MNRS="" QCAT="E" EQTP="45G1" HGHT="2896" LOPR="STM" TRKC="" ACRR="TRUCK" DCRR="RUIYTJ1_01E" RLSE="" RFRT="" CCON="" ISHZ="N" DWTS="3" ISGP="GP" GRAD="" RMRK="" JPOS="CTR" PUTJPOS="CTR" /><position PPOS="01D6406.2" refID="Y.TECT:01D.64.06.2" AREA="01D64" AREA_TYPE="YardRow" type="from" DOOR="Y" /><position PPOS="Q10-0" refID="V.RUIYTJ1_01E:A.38.08.82" AREA="Q10" AREA_TYPE="Vessel" type="to" DOOR="Y" VBAY="38A" /></job></work><displayMsg msgID="7">Message with formId &gt;FORM_LOGIN&lt; does not match current state [FORM_TRUCK_EMPTY_TO_ORIGIN] (MSID=86)</displayMsg></che></message>
[2025-02-24 01:09:03,551][INFO] tosc-master收到了任务, 箱号是XHCU5052126
A506 recv task. CacheTaskCtx(task_id=d736eab29297402b93e0512099ab9594, containers=[{'id': 'XHCU5052126', 'size': 40, 'weight': 28280, 'position': 2, 'slot': 'A.38.08.82'}], act_order_type=3, act_business_type=1, dest_type=1, pow=Q110, seq=3882, vbay=38, vessel_id=RUIYTJ1_01E, need_ps=True, destination=O1D.64)
[2025-02-24 01:09:03,572][INFO] tosc-master把这个任务缓存了
A506 cache task d736eab29297402b93e0512099ab9594
[2025-02-24 01:09:03,874][WARNING]: task_master.py[line:1000] A506缓存了d736eab29297402b93e0512099ab9594这个任务
A506 cached_task CacheTaskCtx(task_id=d736eab29297402b93e0512099ab9594, containers=[{'id': 'XHCU5052126', 'size': 40, 'weight': 28280, 'position': 2, 'slot': 'A.38.08.82'}], act_order_type=3, act_business_type=1, dest_type=1, pow=Q110, seq=12, vbay=38, vessel_id=RUIYTJ1_01E, need_ps=True, destination=O1D.64) 等于 SendTaskCtx(task_id=8fb3597588f34e5788061b07be70d2a0, status=7, containers=[{'id': 'TEMU7986615', 'size': 40, 'weight': 25952, 'position': 2, 'slot': 'A.38.08.84'}], act_order_type=3, act_business_type=1, dest_type=1, pow=Q110, seq=12, vbay=38, vessel_id=RUIYTJ1_01E, need_ps=True, destination=O1D.64, front_pb=False, pb_reason=, send_time=1740329578.9953005, complete_time=0, last_location=O1D, last_work_location_type=1, last_target=PSTP, last_sub_target=102)
[2025-02-24 01:09:03,874][INFO]: task_master.py[line:1010] master判断缓存的任务和SendTaskCtx任务一样, 但是SendTaskCtx任务中的箱号为TEMU7986615
A506 send_task 等于 taskmgr_task. do not send, return.

